---
description: フローステップサービス - Marketo ドキュメント - 製品ドキュメント
title: フローステップサービス
exl-id: 81367562-8b27-4ec5-8a9b-b02083a2e999
source-git-commit: 5d95a77e5c836bf76d82f0db72781727b2743720
workflow-type: tm+mt
source-wordcount: '1243'
ht-degree: 100%

---

# フローステップサービス {#flow-step-service}

セルフサービスのフローステップは、web サービスをオーサリング、公開、Adobe Marketo Engage スマートキャンペーンに統合するためのフレームワークと機能のセットです。このガイドは、既に作成および公開しているサービスをインストールして使用したい Marketo Engage のエンドユーザを対象としています。独自のサービスのオーサリングと公開について詳しくは、[サービスプロバイダーインターフェイス用の GitHub リポジトリ](https://github.com/adobe/Marketo-SSFS-Service-Provider-Interface){target=&quot;_blank&quot;}を参照してください。概念実証ルックアップテーブルの実装は、[ここ](https://github.com/adobe/mkto-flow-lookup){target=&quot;_blank&quot;}にあります。

## サービスのオンボーディングと管理 {#onboarding-and-managing-services}

カスタムフローステップをインストールするには、Marketo の管理者権限が必要です（1月21日リリースの **Webhook の管理**&#x200B;は、3月11日リリースに変更されます）。インストール URL 以外にも、最初のオンボーディングの完了後に、サービスプロバイダーグリッドからサービスの詳細画面にドリルダウンして、サービスのその他すべての側面を編集できます。

## インストール URL {#installation-url}

インストールを開始するには、まず、サービスを定義する OpenAPI ドキュメントの URL を取得する必要があります。これをサービスプロバイダーから提供してもらう必要があります。通常は、`/openapi.json` で終わる URL が含まれます。完全な URL は、`https://www.example.com/OpenAPI.json` のようになります。この URL を取得したら、「管理者」セクションのサービスプロバイダーメニューに移動します。

「**次へ**」をクリックして、「サービス資格情報を入力」セクションに移動します。

![](assets/flow-step-service-1.png)

## サービス資格情報を入力 {#enter-service-credentials}

インストールするサービスにアクセスするには、Marketo に有効な API 資格情報が必要です。これらの資格情報は、サービスプロバイダーから提供してもらう必要があります。サービスには 3 つの異なる認証オプションがあるので、3 つのプロンプトのいずれかが表示される場合があります。**API キー**&#x200B;には入力フィールドが 1 つだけあり、**基本認証**&#x200B;はユーザ名とパスワードが必要で、Realm と呼ばれるフィールドも必要な場合があります。_クライアント資格情報_&#x200B;を使用した **OAuth2** 付与は、_クライアント ID_ および&#x200B;_クライアント秘密鍵_&#x200B;が必要です。

>[!NOTE]
>
>OAuth2 は、3月11日のリリースまでは使用できません。

資格情報を保存すると、Marketo はサービスのステータスエンドポイントを呼び出して、それらが有効であることを確認しようとします。指定した資格情報が無効な場合は、そのことを示すエラーが表示されます。

## オンボーディングガイド（オプション） {#onboarding-guide}

一部のサービスプロバイダーには、オプションのオンボーディングガイド手順が含まれています。その手順には、サービスに固有のオンボーディングを完了するための追加の手順が含まれます。

## フィールドマッピング {#field-mapping}

特定のリードフィールドからデータを受け取る、または返すには、そのフィールドをマッピングする必要があります。オンボーディング中はマッピングが必須の手順ですが、後でいつでも戻ってマッピングを変更できます。別々の画面で設定するマッピングには、次の 2 種類があります。**送信フィールド**&#x200B;は、Marketo がフローステップを呼び出すとサービスに送信されます。**受信フィールド**&#x200B;は、Marketo にデータを返すとサービスからデータを受け取る可能性のあるフィールドです。

>[!NOTE]
>
>送信フィールドをマッピングすると、リードに関連するそのフィールドからデータを送信する権限を Marketo に付与することになり、関連するサービスで処理されるようになります。これらのフィールドには、データプライバシー、保護およびテナント法で保護される個人識別情報が含まれる場合があるので、データをサービスプロバイダーに送信するための適切な法的地位および権限があることを確認します。

オプションのフィールドマッピングは、サービスを中断することなく無効にできますが、必要なマッピングは完全に削除または非アクティブ化されない場合があります。

## サービス主導型マッピング {#service-driven-mappings}

イベント登録フローステップなど、一定の入力と出力を持つサービスでは、**サービス主導型マッピング**&#x200B;を使用します。このタイプのマッピングの場合、サービスプロバイダーは API 名の形式でデータ型とヒントの両方を提供します。ヒントが既存のリードフィールドの API 名と一致する場合、そのフィールドはマッピングセクションに自動的に入力されます。一致するヒントがないフィールドの場合、一致するデータ型を持つフィールドのリストからマッピングを手動で入力する必要があります。オンボーディングを完了するには、必要なマッピングを設定する必要があります。

![](assets/flow-step-service-2.png)

## ユーザ駆動型マッピング {#user-driven-mappings}

日付形式のサービスなど、一定の入力および出力セットを持たないサービスでは、**ユーザ駆動型マッピング**&#x200B;を使用します。つまり、各受信および送信フィールドは、管理者が設定する必要があります。

![](assets/flow-step-service-3.png)

## 送信フィールド {#outgoing-fields}

送信フィールドは、スマートキャンペーンでフローステップが使用された場合にフローステップサービスに送信されるフィールドです。

## 受信フィールド {#incoming-fields}

受信フィールドは、フローステップサービスがデータの書き込みを許可するフィールドです。

## 設定オプション（オプション） {#configuration-options}

一部のサービスには、オプションまたは必須のグローバル設定オプションがあります。オプションが必要な場合は、保存するかオンボーディングを完了する前に、必要なすべてのオプションに対して値を設定する必要があります。名前が斜体のパラメーターは、呼び出されたサービスにヘッダーとして送信されます。

![](assets/flow-step-service-4.png)

## サービスの撤廃 {#retiring-a-service}

サービスの新しいバージョンや別のバージョンへの移行を容易にするために、アクティブな使用を中断せずに、サービスプロバイダーメニューからサービスを撤廃できます。**サービスの撤廃**&#x200B;は、対応するフローステップをスマートキャンペーンフローパレットから削除し、新たな使用を作成できなくします。ほとんどの場合、サービスの撤廃を選択した場合は、既存のサービスを交換する準備が整っている必要があります。

## サービスの非推奨 {#service-deprecation}

サービスプロバイダーは、通常のソフトウェアライフサイクルの一環としてフローステップサービスを非推奨にする必要が生じる場合があります。サービスプロバイダーが非推奨を通知すると、非推奨日とメッセージがサービスプロバイダーグリッドビューに入力されます。非推奨となったサービスを引き続き使用すると、期待された方法で応答しなくなったり、Marketo スマートキャンペーンからのリクエストを受け付けなくなったりして、サービスが中断する可能性があります。したがって、受け取ったサービスの非推奨通知に細心の注意を払い、まだ使用中のサービスステップを撤廃または交換するための適切な手順を実行する必要があります。

## サードパーティおよびカスタムフローステップの使用 {#using-third-party-and-custom-flow-steps}

インストール済みのフローステップは、標準のフローステップとほぼ同じ方法で使用できます。サービスで定義されたすべてのフローパラメーターがエンドユーザに表示されます。

## 選択リストの更新 {#refreshing-picklists}

Marketo では毎晩サービスの選択リストが更新されますが、キャンペーンの作成など、新しい選択肢が必要になる場合があります。更新ボタンを使用して、フローステップの任意のインスタンスから簡単に更新できます。または、サービスを選択したら、管理者／サービスプロバイダーメニューに移動し、「選択リストを更新」をクリックします。

## 受信フィールドの確認 {#checking-incoming-fields}

ツールチップアイコンの上にポインタを合わせると、特定のフローステップに対して設定されている受信フィールドを確認できます。これは、リードがそのステップのフロー中に変更される可能性のあるフィールドを判断するのに役立ちます。そのため、これらのフィールドを使用して、以降の手順で選択を設定できます。

![](assets/flow-step-service-5.png)

## 受信フィールドとデータ値の変更 {#incoming-fields-and-data-value-changes}

他のほとんどのフローステップとは異なり、SSFS フレームワークで実装されたフローは、管理者がマッピングしたリードフィールドにデータを書き戻し、その変更をデータ値変更アクティビティとして記録できます。フローステップがこの方法でデータを書き込むと、スマートキャンペーンが後続のステップに進む前に、これらの変更がすべて完了するので、以降のフローステップの選択で、書き込まれたデータが依存する可能性があります。

## サービスのログと統計 {#service-logs-and-statistics}

各フローステップサービスには、状態のモニタリングや統合に関連する問題のトラブルシューティングに役立つ、複数の種類のログが関連付けられています。

## サービスの統計 {#service-statistics}

サービスの統計ログは、各サービスの呼び出しとコールバックの結果を集計します。これらは、時間、レベル（チャンクまたはレコード）、コード別にグループ化され、受信した各コードの数と最新のログメッセージを提供します。このダッシュボードは、主にサービスの状態を監視するのに役立つように設計されています。
